<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <title>Conexi√≥n directa al chatbot</title>
    <script src="https://cdn.botframework.com/botframework-webchat/latest/webchat.js"></script>
    <style>
        html,
        body {
            height: 100%;
            margin: 0;
        }

        #webchat {
            height: 100%;
            width: 100%;
        }
    </style>
</head>

<body>
    <div id="webchat">Cargando el chat...</div>

    <script>
        (async () => {
            const response = await fetch(
                "https://defb9519e9f3e716a39fe2f4746266.5c.environment.api.powerplatform.com/copilotstudio/dataverse-backed/authenticated/bots/cr84b_agenteDeInscripcion/conversations?api-version=2022-03-01-preview",
                { method: "POST" }
            );

            const { token } = await response.json();

            window.WebChat.renderWebChat(
                {
                    directLine: window.WebChat.createDirectLine({ token })
                },
                document.getElementById('webchat')
            );
        })().catch(err => console.error("Error al iniciar el chat:", err));
    </script>
</body>

</html>